#!/bin/3proxy

# Basic 3proxy configuration

# Logging
log /var/log/3proxy/3proxy.log D
logformat "- +_L%t.%. %N.%p %E %U %C:%c %R:%r %O %I %h %T"
rotate 30

# Set daemon permissions
setgid 65535
setuid 65535

# Auth (comment out for no authentication or uncomment and modify for auth)
#users user1:CL:password1

# External IP address (will use Docker container's IP automatically)
# If you need to specify a particular IP address, uncomment below:
# external YOUR_EXTERNAL_IP

# Connection timeout
timeouts 1 5 30 60 180 1800 15 60

# Use local Shadowsocks SOCKS5 proxy for outgoing connections
# The port 1080 is the local Shadowsocks SOCKS5 proxy
parent 1080 socks5

# HTTP proxy service (runs on port 8080)
proxy -p8080 -n -a

# HTTPS proxy service (runs on port 8443)
proxy -p8443 -n -a

# SOCKS proxy service (runs on port 1081)
socks -p1081 -a

# Allow specific ports for advanced setups (optional)
# allow * * * 80-88,443,8080-8088

# End of configuration