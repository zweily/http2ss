# Basic Privoxy configuration with verbose logging for HTTPS troubleshooting

# Listen on all interfaces on port 8080
listen-address 0.0.0.0:8080

# HTTPS proxy on port 8443
listen-address 0.0.0.0:8443

# Forward to Shadowsocks SOCKS proxy (all URLs)
forward-socks5 / 127.0.0.1:1080 .

# Enable specific debugging for HTTPS connections
debug 1     # Log the destination for each request
debug 2     # Show each connection status
debug 4     # Show I/O status
debug 8     # Show header parsing
debug 128   # Log the applying actions
debug 256   # Log the results of the applying actions
debug 512   # Very verbose - log the applying actions
debug 1024  # Log all data destinations 
debug 2048  # CGI header parsing
debug 4096  # Log all destination headers
debug 8192  # Log all connection attempts
debug   16  # Log all data read from the network
debug   32  # Log all data written to the network
debug   64  # Log filter processing
debug 16384 # Log HTTPS and SSL specific messages

# Accept header is needed for HTTPS connections
enable-accept-header 1

# Forced CSS mode conversion (might help with some HTTPS issues)
accept-intercepted-requests 1

# Maximum client connections
max-client-connections 1024 

# Allow access from any client
permit-access 0.0.0.0/0

# Logging
logdir /var/log/privoxy
logfile privoxy.log

# User-specific overrides
user-manual /usr/share/doc/privoxy/user-manual